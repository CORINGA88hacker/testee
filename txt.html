<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Site com Abas Dinâmicas do Firebase</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    .nav-tabs {
      justify-content: center;
      margin-bottom: 1rem;
    }
    .tab-title {
      text-align: center;
      margin-top: 0.3rem;
      font-weight: 600;
      color: #555;
      font-size: 0.9rem;
      user-select: none;
    }
  </style>
</head>
<body>

  <div class="container mt-4">

    <ul class="nav nav-tabs" id="tabs" role="tablist">
      <!-- Abas serão criadas aqui pelo JS -->
    </ul>

    <div class="tab-content mt-3" id="tabContent">
      <!-- Conteúdo das abas será criado aqui -->
    </div>

  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

  <script>
    // Sua configuração Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyBHIc2E4XwRO5FXo4uHlTQVRArOis73MjE",
      authDomain: "projeto-deus-yato-928-sk-default-rtdb.firebaseapp.com",
      databaseURL: "https://projeto-deus-yato-928-sk-default-rtdb.firebaseio.com",
      projectId: "projeto-deus-yato-928-sk-default-rtdb",
      storageBucket: "projeto-deus-yato-928-sk-default-rtdb.appspot.com",
      messagingSenderId: "790408726854",
      appId: "1:790408726854:android:e2f0de7b7d5dba96b0fd47"
    };

    // Inicializa Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const tabsEl = document.getElementById('tabs');
    const tabContentEl = document.getElementById('tabContent');

    function createTabs(data) {
      tabsEl.innerHTML = '';
      tabContentEl.innerHTML = '';

      let primeiraAba = true;
      let indice = 1;

      for (const key in data) {
        const aba = data[key];
        const id = `tab${indice}`;

        const li = document.createElement('li');
        li.classList.add('nav-item');
        li.setAttribute('role', 'presentation');

        const btn = document.createElement('button');
        btn.classList.add('nav-link');
        if (primeiraAba) btn.classList.add('active');
        btn.id = `${id}-tab`;
        btn.setAttribute('data-bs-toggle', 'tab');
        btn.setAttribute('data-bs-target', `#${id}`);
        btn.type = 'button';
        btn.setAttribute('role', 'tab');
        btn.setAttribute('aria-controls', id);
        btn.setAttribute('aria-selected', primeiraAba ? 'true' : 'false');
        btn.textContent = `Aba ${indice}`;

        li.appendChild(btn);

        const titleDiv = document.createElement('div');
        titleDiv.classList.add('tab-title');
        titleDiv.textContent = aba.title || 'Sem título';
        li.appendChild(titleDiv);

        tabsEl.appendChild(li);

        const contentDiv = document.createElement('div');
        contentDiv.classList.add('tab-pane', 'fade');
        if (primeiraAba) contentDiv.classList.add('show', 'active');
        contentDiv.id = id;
        contentDiv.setAttribute('role', 'tabpanel');
        contentDiv.setAttribute('aria-labelledby', `${id}-tab`);
        contentDiv.innerHTML = `<p>${aba.text || 'Sem conteúdo disponível'}</p>`;

        tabContentEl.appendChild(contentDiv);

        primeiraAba = false;
        indice++;
      }
    }

    // Ouve o banco Firebase em /abas
    db.ref('abas').on('value', snapshot => {
      const data = snapshot.val();
      if (data) {
        createTabs(data);
      } else {
        tabsEl.innerHTML = '<li class="nav-item"><span class="nav-link disabled">Nenhuma aba encontrada</span></li>';
        tabContentEl.innerHTML = '';
      }
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
